import{$ as e,A as t,B as n,C as r,D as i,E as a,F as o,G as s,H as c,I as l,J as u,L as d,M as f,N as p,O as m,P as h,Q as g,R as _,U as v,W as y,X as b,Z as x,_ as S,a as C,at as w,c as T,d as E,et as D,f as O,it as k,j as A,k as j,l as M,m as N,nt as P,ot as F,p as ee,r as I,rt as L,s as R,st as z,u as B,w as V,z as H}from"./Bf-bIFmc.js";import{i as U,o as W,t as G}from"./eaia5yU4.js";import{i as K,n as q,o as J,r as Y,s as te,t as ne}from"./D1tcLX7f.js";import"./zJRtDlf6.js";import{t as X}from"./CNUFAroT.js";var Z=[`open`],Q={block:``},re={class:`absolute right-[calc(100%+10px)] top-1.5`,"text-right":``,"font-mono":``,op35:``,"lt-lg:hidden":``},ie={flex:`~ gap-2 items-center`,"cursor-pointer":``,"select-none":``,"bg-hover":``,px2:``,py2:``,"text-sm":``,"font-mono":``},ae={flex:``,"flex-auto":``,"flex-col":``,"flex-wrap":``,"gap-3":``,"md:flex-row":``,"md:justify-end":``},oe={key:1},se={flex:`~ gap-2 items-start`},ce={"pointer-events-none":``,absolute:``,"right-2":``,"top-2":``,"text-right":``,"text-5em":``,"font-mono":``,op5:``},le={key:0,flex:`~ col gap-4`,"of-auto":``,px4:``,py3:``},ue={key:0,flex:`~ gap-2 items-start`},de={flex:`~ col gap-2`},fe={flex:`~ gap-2 items-center wrap`},pe={key:1,flex:`~ gap-2 items-center`},me={key:2,flex:`~ gap-2 items-start`},he={flex:`~ col gap-2`},ge={flex:`~ gap-2 items-center wrap`},_e=[`onClick`],ve={key:3,flex:`~ gap-2 items-start`},ye={flex:`~ col gap-2`},be={key:0},xe={key:1},Se={flex:`~ gap-2 items-center wrap`},Ce={key:4},we={flex:`~ gap-2 items-center`},Te=[`onClick`],Ee={key:5,flex:`~ gap-2`},De={flex:`~ col gap-2`,"w-full":``},Oe={"of-auto":``,p2:``,px3:``,op50:``},ke=_({__name:`ConfigItem`,props:n({config:{},index:{},filters:{},active:{type:Boolean},matchedGlobs:{}},{open:{default:!0},openModifiers:{}}),emits:n([`badgeClick`],[`update:open`]),setup(n,{emit:r}){let i=n,a=r,c=new Set([`name`]),m=new Set([`index`]),_=b(n,`open`),v=P(_.value);if(!v.value){let e=g(()=>{_.value&&(v.value=!0,e())})}let x=V();function S(e){T.plugin=e,x.push(`/rules`)}let C=A(()=>{let e=[`files`,`plugins`,`ignores`,`rules`,`name`,`index`];return Object.fromEntries(Object.entries(i.config).filter(([t])=>!e.includes(t)))});return(r,i)=>{let g=U,b=X,x=G,T=Y,A=q,j=K,N=u(`close-popper`);return y(),o(`details`,{class:w([`flat-config-item`,n.active?`border-yellow:70`:`border-base`]),open:_.value,border:`~ rounded-lg`,relative:``,onToggle:i[1]||=e=>_.value=e.target.open},[f(`summary`,Q,[f(`div`,re,` #`+z(n.index+1),1),f(`div`,ie,[i[2]||=f(`div`,{class:`[details[open]_&]:rotate-90`,"i-ph-caret-right":``,"flex-none":``,op50:``,transition:``},null,-1),f(`div`,ae,[f(`span`,{class:w(n.config.name?``:`op50 italic`),"flex-1":``},[n.config.name?(y(),p(g,{key:0,name:n.config.name},null,8,[`name`])):(y(),o(`span`,oe,`anonymous #`+z(n.index+1),1))],2),f(`div`,se,[d(b,{icon:`i-ph-file-magnifying-glass-duotone`,number:n.config.files?.length||0,color:`text-yellow5`,title:`Files`},null,8,[`number`]),d(b,{icon:`i-ph-eye-closed-duotone`,number:n.config.ignores?.length||0,color:`text-purple5 dark:text-purple4`,title:`Ignores`},null,8,[`number`]),d(b,{icon:`i-ph-sliders-duotone`,number:Object.keys(C.value).length,color:`text-green5`,title:`Options`},null,8,[`number`]),d(b,{icon:`i-ph-plug-duotone`,number:Object.keys(n.config.plugins||{}).length,color:`text-teal5`,title:`Plugins`},null,8,[`number`]),d(b,{icon:`i-ph-list-dashes-duotone`,number:Object.keys(n.config.rules||{}).length,color:`text-blue5 dark:text-blue4`,title:`Rules`,"mr-2":``},null,8,[`number`])])])])]),f(`div`,ce,` #`+z(n.index+1),1),v.value?(y(),o(`div`,le,[n.config.files?(y(),o(`div`,ue,[i[4]||=f(`div`,{"i-ph-file-magnifying-glass-duotone":``,my1:``,"flex-none":``},null,-1),f(`div`,de,[i[3]||=f(`div`,null,`Applies to files matching`,-1),f(`div`,fe,[(y(!0),o(t,null,s(n.config.files?.flat(),(e,t)=>(y(),p(x,{key:t,glob:e,popup:`files`,active:n.matchedGlobs?.includes(e)},null,8,[`glob`,`active`]))),128))])])])):n.config.rules||Object.keys(C.value).length?(y(),o(`div`,pe,[...i[5]||=[f(`div`,{"i-ph-files-duotone":``,"flex-none":``},null,-1),f(`div`,null,`Generally applies to all files`,-1)]])):h(``,!0),n.config.plugins?(y(),o(`div`,me,[i[6]||=f(`div`,{"i-ph-plug-duotone":``,my1:``,"flex-none":``},null,-1),f(`div`,he,[f(`div`,null,`Plugins (`+z(Object.keys(n.config.plugins).length)+`)`,1),f(`div`,ge,[(y(!0),o(t,null,s(Object.keys(n.config.plugins),(e,t)=>(y(),o(`button`,{key:t,border:`~ base rounded-full`,px3:``,style:F({color:(`getPluginColor`in r?r.getPluginColor:k(W))(e),backgroundColor:(`getPluginColor`in r?r.getPluginColor:k(W))(e,.1)}),"font-mono":``,onClick:t=>S(e)},z(e),13,_e))),128))])])])):h(``,!0),n.config.ignores?(y(),o(`div`,ve,[i[7]||=f(`div`,{"i-ph-eye-closed-duotone":``,my1:``,"flex-none":``},null,-1),f(`div`,ye,[Object.keys(n.config).some(e=>e!==`ignores`&&!k(m).has(e)&&!k(c).has(e))===!1?(y(),o(`div`,be,` Ignore files globally `)):(y(),o(`div`,xe,` Ignore `)),f(`div`,Se,[(y(!0),o(t,null,s(n.config.ignores,(e,t)=>(y(),p(x,{key:t,glob:e,active:n.matchedGlobs?.includes(e)},null,8,[`glob`,`active`]))),128))])])])):h(``,!0),n.config.rules&&Object.keys(n.config.rules).length?(y(),o(`div`,Ce,[f(`div`,we,[i[8]||=f(`div`,{"i-ph-list-dashes-duotone":``,my1:``,"flex-none":``},null,-1),f(`div`,null,`Rules (`+z(Object.keys(n.config.rules).length)+`)`,1)]),d(A,{py2:``,class:w(k(M)?`pl6`:``),rules:n.config.rules,filter:e=>!n.filters?.rule||n.filters.rule===e,"get-bind":e=>({class:k(E)(n.config.rules?.[e])===`off`?`op50`:``})},{popup:e(({ruleName:e,value:t})=>[d(T,{border:`t base`,"is-local":!0,state:{name:e,level:k(E)(t),configIndex:n.index,options:k(O)(t)}},null,8,[`state`])]),"popup-actions":e(({ruleName:e})=>[D((y(),o(`button`,{"btn-action-sm":``,onClick:t=>a(`badgeClick`,e)},[...i[9]||=[f(`div`,{"i-ph-funnel-duotone":``},null,-1),l(` Filter by this rule `,-1)]],8,Te)),[[N]])]),_:1},8,[`class`,`rules`,`filter`,`get-bind`]),f(`div`,null,[n.filters?.rule?(y(),o(`button`,{key:0,ml8:``,op50:``,onClick:i[0]||=e=>a(`badgeClick`,``)},` ...`+z(Object.keys(n.config.rules).filter(e=>e!==n.filters?.rule).length)+` others rules are hidden `,1)):h(``,!0)])])):h(``,!0),Object.keys(C.value).length?(y(),o(`div`,Ee,[i[11]||=f(`div`,{"i-ph-sliders-duotone":``,my1:``,"flex-none":``},null,-1),f(`div`,De,[i[10]||=f(`div`,null,` Additional configurations `,-1),(y(!0),o(t,null,s(C.value,(e,t)=>(y(),o(`div`,{key:t,border:`~ base rounded-lg`},[f(`div`,Oe,z(t),1),d(j,{lang:`ts`,code:k(J)(e),"max-h-100":``,"max-w-full":``,"w-full":``,"of-scroll":``,rounded:``,"bg-code":``,p2:``,"text-sm":``},null,8,[`code`])]))),128))])])):h(``,!0)])):h(``,!0)],42,Z)}}}),Ae=Object.assign(ke,{__name:`ConfigItem`}),je={flex:`~ col gap-3`,py4:``},Me={relative:``,flex:``},Ne={pos:`absolute left-8 right-8 top-1/1`,border:`~ base rounded`,flex:`~ col`,"z-1":``,"mt--1":``,"max-h-80":``,"of-auto":``,"bg-glass":``,py1:``,shadow:``},Pe=[`onClick`],Fe={key:0,flex:`~ gap-2 items-center wrap`,mb2:``},Ie={key:0},Le={key:0,op50:``},Re={key:1},ze={flex:`~ gap-2 items-center`,border:`~ blue/20 rounded-full`,"bg-blue:10":``,px3:``,py1:``},Be={flex:`~ gap-2 items-center wrap`},Ve={key:0,border:`~ base rounded`,flex:``},$={key:1,flex:`~ gap-2 items-center`,ml2:``,"select-none":``},He=[`checked`],Ue={flex:`~ gap-2 items-center wrap`},We={class:`flat-config-item`,border:`~ base rounded-lg`,relative:``},Ge={block:``},Ke={flex:`~ gap-2 items-start`,"cursor-pointer":``,"select-none":``,"bg-hover":``,px2:``,py2:``,"text-sm":``,"font-mono":``,op75:``},qe={class:`flat-config-item`,border:`~ base rounded-lg`,open:``,relative:``},Je={block:``},Ye={flex:`~ gap-2 items-start`,"cursor-pointer":``,"select-none":``,"bg-hover":``,px2:``,py2:``,"text-sm":``,"font-mono":``,op75:``},Xe={px4:``,pt4:``},Ze={px4:``,pt4:``},Qe=_({__name:`configs`,setup(e){let n=P(R.filepath);function u(){C.value=C.value.map(()=>!0)}function b(){C.value=C.value.map(()=>!1)}let T=L([]),O=L(null);g(()=>{let e=I.value.configs;R.filepath?(O.value=N(R.filepath,I.value.configs,I.value.meta.basePath),e=O.value.configs.length?Array.from(new Set([...O.value.configs,...I.value.configsGeneral.filter(e=>!ee(e)).map(e=>e.index)])).sort((e,t)=>e-t).map(e=>I.value.configs[e]):[]):O.value=null,R.rule&&(e=e.filter(e=>R.rule in(e.rules||{}))),T.value=e});let M=A(()=>new ne(I.value.filesResolved?.list||[],{threshold:.3,includeMatches:!0})),F=A(()=>M.value.search(R.filepath||``)),V=P(0),U=P(!1);function W(e=V.value){U.value&&=(n.value=R.filepath=F.value[e]?.item||R.filepath,!1)}function K(){setTimeout(()=>{U.value=!1},100)}function J(e){U.value&&(V.value+=e,V.value<0&&(V.value+=F.value.length),V.value>=F.value.length&&(V.value-=F.value.length))}let Y=A(()=>{if(!R.filepath||B.value.viewFileMatchType!==`merged`)return{all:{},common:{},specific:{},specificDisabled:{},specificEnabled:{}};let e={},t={},n={};T.value.forEach(r=>{r.rules&&(Object.assign(e,r.rules),r.files?Object.assign(n,r.rules):Object.assign(t,r.rules))});let r=Object.fromEntries(Object.entries(n).filter(([e,t])=>E(t)===`off`)),i=Object.fromEntries(Object.entries(n).filter(([e,t])=>E(t)!==`off`));for(let t in e)E(e[t])===`off`&&delete e[t];return{all:e,common:t,specific:n,specificDisabled:r,specificEnabled:i}}),X=_({props:{matches:Array},setup(e){return()=>e.matches?.map(e=>{let t=0,n=e.value||``,r=[];for(let[i,a]of e.indices)t<i&&r.push(H(`span`,{class:`op50`},n.slice(t,i))),r.push(H(`span`,{class:`text-purple font-bold`},n.slice(i,a+1))),t=a+1;return t<n.length&&r.push(H(`span`,{class:`op50`},n.slice(t))),r})}});S(()=>n.value,()=>{R.filepath=n.value,V.value=0},{debounce:200}),x(()=>R.filepath,()=>{R.filepath!==n.value&&(n.value=R.filepath)},{flush:`sync`});let Z=new Map,Q=r();return v(async()=>{if(Q.query.index!=null){let e=Number(Q.query.index)-1;C.value=C.value.map((t,n)=>n===e),await c(),Z.get(e)?.scrollIntoView({behavior:`smooth`,block:`start`})}}),(e,r)=>{let c=te,g=G,_=q,v=Ae;return y(),o(`div`,null,[f(`div`,je,[f(`div`,Me,[D(f(`input`,{"onUpdate:modelValue":r[0]||=e=>n.value=e,placeholder:`Test matching with filepath...`,border:`~ base rounded-full`,class:w(n.value?`font-mono`:``),"w-full":``,"bg-transparent":``,px3:``,py2:``,pl10:``,"outline-none":``,onFocus:r[1]||=e=>U.value=!0,onClick:r[2]||=e=>U.value=!0,onBlur:K,onKeydown:[r[3]||=m(e=>U.value=!1,[`esc`]),r[4]||=m(j(e=>J(1),[`prevent`]),[`down`]),r[5]||=m(j(e=>J(-1),[`prevent`]),[`up`]),r[6]||=m(j(e=>W(),[`prevent`]),[`enter`])]},null,34),[[a,n.value]]),r[13]||=f(`div`,{absolute:``,"bottom-0":``,"left-0":``,"top-0":``,flex:`~ items-center justify-center`,p4:``,op50:``},[f(`div`,{"i-ph-magnifying-glass-duotone":``})],-1),D(f(`div`,Ne,[(y(!0),o(t,null,s(F.value,(e,n)=>(y(),o(`button`,{key:e.item,class:w(n===V.value?`bg-active`:``),px3:``,"py0.5":``,"text-left":``,"font-mono":``,"hover:bg-active":``,onClick:e=>W(n)},[e.matches?(y(),p(k(X),{key:0,matches:e.matches},null,8,[`matches`])):(y(),o(t,{key:1},[l(z(e.item),1)],64))],10,Pe))),128))],512),[[i,U.value&&F.value.length]])]),k(R).filepath||k(R).rule?(y(),o(`div`,Fe,[k(R).filepath?(y(),o(`div`,Ie,[f(`div`,{flex:`~ gap-2 items-center wrap`,border:`~ purple/20 rounded-full`,"bg-purple:10":``,px3:``,py1:``,class:w({"saturate-0":!T.value.length})},[r[19]||=f(`div`,{"i-ph-file-dotted-duotone":``,"text-purple":``},null,-1),r[20]||=f(`span`,{op50:``},`Filepath`,-1),f(`code`,null,z(k(R).filepath),1),T.value.length?k(B).viewFileMatchType===`configs`?(y(),o(t,{key:1},[r[14]||=f(`span`,{op50:``},`matched with`,-1),f(`span`,null,z(T.value.length)+` / `+z(k(I).configs.length),1),r[15]||=f(`span`,{op50:``},`config items`,-1)],64)):(y(),o(t,{key:2},[r[16]||=f(`span`,{op50:``},`matched with total `,-1),f(`span`,null,z(Object.keys(Y.value.all).length),1),r[17]||=f(`span`,{op50:``},`rules, `,-1),f(`span`,null,z(Object.keys(Y.value.specific).length),1),r[18]||=f(`span`,{op50:``},`of them are specific to the file`,-1)],64)):(y(),o(`span`,Le,`is not included or has been ignored`)),f(`button`,{"i-ph-x":``,"text-sm":``,op25:``,"hover:op100":``,onClick:r[7]||=e=>{k(R).filepath=``,n.value=``}})],2)])):h(``,!0),k(R).rule?(y(),o(`div`,Re,[f(`div`,ze,[r[21]||=f(`div`,{"i-ph-funnel-duotone":``},null,-1),r[22]||=f(`span`,{op50:``},`Filtered by`,-1),d(c,{name:k(R).rule},null,8,[`name`]),r[23]||=f(`span`,{op50:``},`rule`,-1),f(`button`,{"i-ph-x":``,"text-sm":``,op25:``,"hover:op100":``,onClick:r[8]||=e=>k(R).rule=``})])])):h(``,!0)])):h(``,!0),f(`div`,Be,[k(R).filepath?(y(),o(`div`,Ve,[f(`button`,{class:w(k(B).viewFileMatchType===`configs`?`btn-action-active`:`op50`),"btn-action":``,"border-none":``,onClick:r[9]||=e=>k(B).viewFileMatchType=k(B).viewFileMatchType===`configs`?`merged`:`configs`},[...r[24]||=[f(`div`,{"i-ph-stack-duotone":``},null,-1),f(`span`,null,`Matched Config Items`,-1)]],2),r[26]||=f(`div`,{border:`l base`},null,-1),f(`button`,{class:w(k(B).viewFileMatchType===`configs`?`op50`:`btn-action-active`),"btn-action":``,"border-none":``,onClick:r[10]||=e=>k(B).viewFileMatchType=k(B).viewFileMatchType===`configs`?`merged`:`configs`},[...r[25]||=[f(`div`,{"i-ph-film-script-duotone":``},null,-1),f(`span`,null,`Merged Rules`,-1)]],2)])):h(``,!0),k(R).filepath&&k(B).viewFileMatchType===`configs`?(y(),o(`label`,$,[f(`input`,{checked:k(B).showSpecificOnly,type:`checkbox`,onChange:r[11]||=e=>k(B).showSpecificOnly=!!e.target.checked},null,40,He),r[27]||=f(`span`,{op50:``},`Show Specific Rules Only`,-1)])):h(``,!0),r[28]||=f(`div`,{"flex-auto":``},null,-1),f(`button`,{"btn-action":``,px3:``,onClick:u},` Expand All `),f(`button`,{"btn-action":``,px3:``,onClick:b},` Collapse All `)]),T.value.length?(y(),o(t,{key:2},[k(R).filepath&&k(B).viewFileMatchType===`merged`?(y(),o(t,{key:0},[f(`details`,We,[f(`summary`,Ge,[f(`div`,Ke,[r[31]||=f(`div`,{"i-ph-caret-right":``,class:`[details[open]_&]:rotate-90`,transition:``},null,-1),l(` Merged Rules: Common to every file (`+z(Object.keys(Y.value.common).length)+` rules) `,1)])]),d(_,{m4:``,rules:Y.value.common},null,8,[`rules`])]),f(`details`,qe,[f(`summary`,Je,[f(`div`,Ye,[r[32]||=f(`div`,{"i-ph-caret-right":``,class:`[details[open]_&]:rotate-90`,transition:``},null,-1),l(` Merged Rules: Specific to matched file (`+z(Object.keys(Y.value.specific).length)+` rules) `,1)])]),Object.keys(Y.value.specificDisabled).length?(y(),o(t,{key:0},[f(`div`,Xe,` Disables (`+z(Object.keys(Y.value.specificDisabled).length)+`) `,1),d(_,{m4:``,"get-bind":e=>({class:`op50`}),rules:Y.value.specificDisabled},null,8,[`rules`])],64)):h(``,!0),Object.keys(Y.value.specificEnabled).length?(y(),o(t,{key:1},[f(`div`,Ze,` Enables (`+z(Object.keys(Y.value.specificEnabled).length)+`) `,1),d(_,{m4:``,rules:Y.value.specificEnabled},null,8,[`rules`])],64)):h(``,!0)])],64)):(y(!0),o(t,{key:1},s(k(I).configs,(e,t)=>D((y(),p(v,{key:t,ref_for:!0,ref:e=>{k(Z).set(t,e?.$el)},open:k(C)[t],"onUpdate:open":e=>k(C)[t]=e,config:e,index:t,filters:k(R),active:!!(k(R).filepath&&e.files),"matched-globs":O.value?.globs,onBadgeClick:r[12]||=e=>k(R).rule=e},null,8,[`open`,`onUpdate:open`,`config`,`index`,`filters`,`active`,`matched-globs`])),[[i,T.value.includes(e)&&(!k(R).filepath||!k(B).showSpecificOnly||e.files)]])),128))],64)):(y(),o(t,{key:1},[r[30]||=f(`div`,{mt5:``,italic:``,op50:``},` No matched config items. `,-1),O.value?.globs.length?(y(),o(t,{key:0},[r[29]||=f(`div`,null,`Ignored by globs:`,-1),f(`div`,Ue,[(y(!0),o(t,null,s(O.value.globs,(e,t)=>(y(),p(g,{key:t,glob:e,popup:`configs`},null,8,[`glob`]))),128))])],64)):h(``,!0)],64))])])}}});export{Qe as default};