import{_ as R,a as L,b as S}from"./DcKMyLUs.js";import{_ as D}from"./BPrPIMhO.js";import{g as A,m as E,j,r as O,k as U,l as q,n as H,p as J,c as s,o,a as e,q as $,t as v,F as p,b as _,s as u,v as c,w as I,x as K,d as T,y as i,z as h,A as N,B as g,C as m}from"./CmtEZGNH.js";const P=["open"],Q={block:""},W={class:"absolute right-[calc(100%+10px)] top-1.5","text-right":"","font-mono":"",op35:"","lt-lg:hidden":""},X={flex:"~ gap-2 items-start wrap items-center","cursor-pointer":"","select-none":"","bg-hover":"",px2:"",py2:"","text-sm":"","font-mono":""},Y={flex:"","flex-auto":"","flex-col":"","gap-3":"","md:flex-row":""},Z={"flex-auto":"",flex:"~ gap-2 items-center"},ee={key:2,op50:""},oe={flex:"~ gap-2 items-start wrap"},te={"pointer-events-none":"",absolute:"","right-2":"","top-2":"","text-right":"","text-5em":"","font-mono":"",op5:""},ne={key:0,flex:"~ col gap-4","of-auto":"",px4:"",py4:""},le={flex:"~ gap-2 items-center"},se={flex:"~ col gap-1",ml6:"","mt--2":""},ie={badge:"","text-start":""},ae={key:0,"max-h":"50vh","min-w-100":""},pe={flex:"~ items-center gap-2",p3:""},re=["onClick"],ue={p3:"",border:"t base"},de={flex:"~ gap-2 items-start"},fe={flex:"~ col gap-2"},ge={flex:"~ gap-2 items-center wrap"},me={flex:"~ gap-1 wrap",ml6:"","mt--2":""},ve={flex:"~ gap-2 items-center"},ce={flex:"~ col gap-1",ml7:"","mt--2":""},_e=A({__name:"FileGroupItem",props:E({index:{},group:{}},{open:{default:!0},openModifiers:{}}),emits:["update:open"],setup(y){const d=y,f=j(y,"open"),b=O(f.value);if(!b.value){const n=U(()=>{f.value&&(b.value=!0,n())})}const t=q(()=>{if(d.group.configs.length===1)return{type:"config",config:d.group.configs[0]};if(d.group.globs.size<=2)return{type:"glob",globs:[...d.group.globs.values()]}}),k=H();function w(n){k.push(`/configs?index=${n+1}`)}return(n,l)=>{const x=R,C=L,G=D,M=J("VDropdown"),V=S;return o(),s("details",{class:"flat-config-item",open:f.value,border:"~ base rounded-lg",relative:"",onToggle:l[0]||(l[0]=a=>f.value=a.target.open)},[e("summary",Q,[e("div",W," #"+v(n.index+1),1),e("div",X,[l[3]||(l[3]=e("div",{class:"[details[open]_&]:rotate-90","i-ph-caret-right":"",op50:"",transition:""},null,-1)),e("div",Y,[e("span",Z,[t.value?.type==="config"?(o(),s(p,{key:0},[l[1]||(l[1]=e("span",{op75:""},"Config",-1)),_(x,{badge:"",name:t.value.config.name,index:t.value.config.index},null,8,["name","index"])],64)):t.value?.type==="glob"?(o(),s(p,{key:1},[l[2]||(l[2]=e("span",{op75:""},"Globs",-1)),(o(!0),s(p,null,u(t.value.globs,(a,r)=>(o(),c(C,{key:r,glob:a},null,8,["glob"]))),128))],64)):(o(),s("span",ee," Files group #"+v(n.index+1),1))]),e("div",oe,[_(G,{icon:"i-ph-files-duotone",number:n.group.files?.length||0,color:"text-yellow5",title:"Files"},null,8,["number"]),_(G,{icon:"i-ph-stack-duotone",number:n.group.configs.length,color:"text-blue5 dark:text-blue4",title:"Configs","mr-2":""},null,8,["number"])])])])]),e("div",te," #"+v(n.index+1),1),b.value?(o(),s("div",ne,[e("div",le,[l[4]||(l[4]=e("div",{"i-ph-stack-duotone":"","flex-none":""},null,-1)),e("div",null,"Configs Specific to the Files ("+v(n.group.configs.length)+")",1)]),e("div",se,[(o(!0),s(p,null,u(n.group.configs,(a,r)=>(o(),s("div",{key:r,"font-mono":"",flex:"~ gap-2"},[_(M,null,{popper:I(({shown:z})=>[z?(o(),s("div",ae,[e("div",pe,[e("button",{"btn-action-sm":"",title:"Copy",onClick:F=>w(r)},l[5]||(l[5]=[e("div",{"i-ph-stack-duotone":""},null,-1),T(" Go to this config ",-1)]),8,re),K(n.$slots,"popup-actions")]),e("div",ue,[e("div",de,[l[7]||(l[7]=e("div",{"i-ph-file-magnifying-glass-duotone":"",my1:"","flex-none":"",op75:""},null,-1)),e("div",fe,[l[6]||(l[6]=e("div",{op50:""}," Applies to files matching ",-1)),e("div",ge,[(o(!0),s(p,null,u(a.files?.flat(),(F,B)=>(o(),c(C,{key:B,glob:F,active:n.group.globs.has(F)},null,8,["glob","active"]))),128))])])])])])):$("",!0)]),default:I(()=>[e("button",ie,[_(x,{name:a.name,index:r},null,8,["name","index"])])]),_:2},1024)]))),128))]),l[9]||(l[9]=e("div",{flex:"~ gap-2 items-center"},[e("div",{"i-ph-file-magnifying-glass-duotone":"","flex-none":""}),e("div",null,"Matched Globs")],-1)),e("div",me,[(o(!0),s(p,null,u(n.group.globs,(a,r)=>(o(),c(C,{key:r,glob:a},null,8,["glob"]))),128))]),e("div",ve,[l[8]||(l[8]=e("div",{"i-ph-files-duotone":"","flex-none":""},null,-1)),e("div",null,"Matched Local Files ("+v(n.group.files.length)+")",1)]),e("div",ce,[(o(!0),s(p,null,u(n.group.files,a=>(o(),c(V,{key:a,"font-mono":"",filepath:a},null,8,["filepath"]))),128))])])):$("",!0)],40,P)}}}),be=Object.assign(_e,{__name:"FileGroupItem"}),xe={key:0,flex:"~ col gap-4",my4:""},he={flex:"~ gap-2 items-center"},ye={border:"~ base rounded",flex:"~ inline"},ke={key:0,flex:"~ gap-2 col"},we={key:1},Ce={flex:"~ gap-2 items-center"},Fe={flex:"~ col gap-1",py4:"","font-mono":""},$e={key:1},Ne=A({__name:"files",setup(y){function d(){m.value=m.value.map(()=>!0)}function f(){m.value=m.value.map(()=>!1)}return(b,t)=>{const k=be,w=S;return i(h).filesResolved?(o(),s("div",xe,[t[7]||(t[7]=e("div",{"text-gray:75":""},[T(" This tab shows the preview for files match from the workspace. This feature is "),e("span",{"text-amber":""},"experimental"),T(" and may not be 100% accurate. ")],-1)),e("div",he,[e("div",ye,[e("button",{class:N(i(g).viewFilesTab==="list"?"btn-action-active":"op50"),"btn-action":"","border-none":"",onClick:t[0]||(t[0]=n=>i(g).viewFilesTab="list")},t[2]||(t[2]=[e("div",{"i-ph-files-duotone":""},null,-1),e("span",null,"List",-1)]),2),t[4]||(t[4]=e("div",{border:"l base"},null,-1)),e("button",{class:N(i(g).viewFilesTab==="group"?"btn-action-active":"op50"),"btn-action":"","border-none":"",onClick:t[1]||(t[1]=n=>i(g).viewFilesTab="group")},t[3]||(t[3]=[e("div",{"i-ph-rows-duotone":""},null,-1),e("span",null,"File Groups",-1)]),2)]),t[5]||(t[5]=e("div",{"flex-auto":""},null,-1)),i(g).viewFilesTab==="group"?(o(),s(p,{key:0},[e("button",{"btn-action":"",px3:"",onClick:d}," Expand All "),e("button",{"btn-action":"",px3:"",onClick:f}," Collapse All ")],64)):$("",!0)]),i(g).viewFilesTab==="group"?(o(),s("div",ke,[(o(!0),s(p,null,u(i(h).filesResolved.groups,(n,l)=>(o(),c(k,{key:n.id,open:i(m)[l],"onUpdate:open":x=>i(m)[l]=x,group:n,index:l},null,8,["open","onUpdate:open","group","index"]))),128))])):(o(),s("div",we,[e("div",Ce,[t[6]||(t[6]=e("div",{"i-ph-files-duotone":"","flex-none":""},null,-1)),e("div",null,"Matched Local Files ("+v(i(h).filesResolved.list.length)+")",1)]),e("div",Fe,[(o(!0),s(p,null,u(i(h).filesResolved.list,n=>(o(),c(w,{key:n,filepath:n},null,8,["filepath"]))),128))])]))])):(o(),s("div",$e,t[8]||(t[8]=[e("div",{p3:"",italic:"",op50:""}," No matched files found in the workspace. ",-1)])))}}});export{Ne as default};
